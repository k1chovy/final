<div class="container mt-5">
  <div class="card shadow-lg">
    <div class="card-header bg-primary text-white">
      <h2 class="mb-0"><%= @post.title %></h2>
      <small class="text-light">By: <%= @post.user.email %> | Created at: <%= @post.created_at.strftime("%Y-%m-%d %H:%M") %></small>
    </div>
    <div class="card-body">
      <% if @post.image.attached? %>
        <div class="text-center mb-4">
          <%= image_tag @post.image, class: "img-fluid rounded shadow-sm", style: "max-height: 400px; object-fit: cover;" %>
        </div>
      <% else %>
        <div class="text-center text-muted mb-4">
          <em>No image attached</em>
        </div>
      <% end %>
      <p class="text-justify"><%= @post.content %></p>
    </div>
    <div class="card-footer d-flex justify-content-between">
      <div>
        <%= link_to "Edit", edit_post_path(@post), class: "btn btn-warning me-2" %>
        
        <!-- Form yêu cầu mật khẩu để xóa bài viết -->
        <%= form_with(model: @post, url: post_path(@post), method: :delete, class: "d-inline") do |f| %>
          <div class="form-group d-inline">
            <%= f.password_field :current_password, placeholder: "Enter password", class: "form-control form-control-sm d-inline-block w-auto me-2", required: true %>
          </div>
          <%= f.submit "Delete", class: "btn btn-danger btn-sm" %>
        <% end %>
      </div>
      <%= link_to "Back to Posts", posts_path, class: "btn btn-secondary" %>
    </div>
  </div>
</div>
