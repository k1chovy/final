<%= form_with(model: @post, local: true) do |form| %>
  <div class="form-group">
    <%= form.label :title %>
    <%= form.text_field :title, class: "form-control" %>
  </div>
  <div class="form-group">
    <%= form.label :content %>
    <%= form.text_area :content, class: "form-control" %>
  </div>
  <div class="form-group">
    <%= form.label :image, "Upload Image" %>
    <%= form.file_field :image, class: "form-control", id: "image-upload" %>
  </div>
  <div id="preview" class="mt-3"></div>
  <%= form.submit "Create Post", class: "btn btn-primary mt-3" %>
<% end %>

<script>
  // Hiển thị ảnh preview sau khi người dùng chọn
  document.getElementById('image-upload').addEventListener('change', function(event) {
    const preview = document.getElementById('preview');
    preview.innerHTML = ''; // Xóa ảnh preview cũ
    const file = event.target.files[0];
    if (file) {
      const img = document.createElement('img');
      img.src = URL.createObjectURL(file);
      img.style.maxWidth = '300px';
      img.style.marginTop = '10px';
      preview.appendChild(img);
    }
  });
</script>
